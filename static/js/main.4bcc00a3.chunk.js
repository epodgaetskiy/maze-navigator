(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(t,e,n){t.exports=n(55)},55:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(14),o=n.n(i),c=n(26),u=n(10),s=n(2),l=n(3),p=n(5),f=n(4),d=n(6),h=n(8),b=n(9),m=n(19),y=n.n(m),g=function(t,e,n){var r=new y.a.Grid(t);return(new y.a.AStarFinder).findPath(e.x,e.y,n.x,n.y,r)};function v(){var t=Object(h.a)(["\n  display: flex;\n"]);return v=function(){return t},t}var x=b.b.div(v()),j=function(t){function e(){return Object(s.a)(this,e),Object(p.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return a.a.createElement(x,null,this.props.children)}}]),e}(a.a.PureComponent);function O(){var t=Object(h.a)(["\n      rotate(",")\n    "]);return O=function(){return t},t}function w(){var t=Object(h.a)(["\n  position: relative;\n  background: ",';\n  width: 20px;\n  height: 20px;\n  border: 1px solid white;\n\n  &:after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%)\n      ',";\n    width: 100%;\n    height: 100%;\n    color: blue;\n    font-weight: bold;\n    display: ",';\n    align-items: center;\n    background-image: url("images/icon-nav.png");\n    background-size: 100% 100%;\n  }\n']);return w=function(){return t},t}var E=b.b.div(w(),function(t){var e=t.isWay,n=t.isWall;return e?"yellow":n?"#2FD781":"#E5E7EA"},function(t){var e=t.userDirection;return Object(b.a)(O(),function(t){switch(t){case"top":return"0deg";case"bottom":return"180deg";case"left":return"270deg";case"right":return"90deg";default:return"0deg"}}(e))},function(t){return t.isUser?"flex":"none"}),k=function(t){function e(){return Object(s.a)(this,e),Object(p.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return a.a.createElement(E,{userDirection:this.props.userDirection,isWall:this.props.isWall,isUser:this.props.isUser,isWay:this.props.isWay})}}]),e}(a.a.PureComponent),C=n(15),S=function(t){function e(){var t,n;Object(s.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(p.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(a)))).state={matrixValue:""},n.onChange=function(t){n.setState(Object(C.a)({},t.target.name,t.target.value))},n.calculateMaze=function(){var t=0,e=n.state.matrixValue.split("").reduce(function(e,n){return"\n"!==n?(e[t]||(e[t]=[]),e[t].push(n)):t++,e},[]);n.props.updateMatrix(e)},n}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("textarea",{name:"matrixValue",onChange:this.onChange,rows:10,style:{width:"300px"}})),a.a.createElement("button",{type:"button",onClick:this.calculateMaze},"Calculate maze"))}}]),e}(a.a.PureComponent),B=function(t){function e(){return Object(s.a)(this,e),Object(p.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props,e=t.snapshotUserStep,n=t.handleClickAction;return a.a.createElement("div",{style:{marginLeft:"20px"}},a.a.createElement("div",{style:{marginBottom:"10px"}},a.a.createElement("button",{type:"button",disabled:"forward"!==e.type,onClick:n(e.action)},"Go ",e.numberRepeatingSteps||"n"," ","step".concat(e.numberRepeatingSteps>1?"s":"")," ","forward")),a.a.createElement("div",{style:{marginBottom:"10px"}},a.a.createElement("button",{type:"button",disabled:"around"!==e.type,onClick:n(e.action)},"Turn around")),a.a.createElement("div",{style:{marginBottom:"10px"}},a.a.createElement("button",{type:"button",disabled:"left"!==e.type,onClick:n(e.action)},"Turn left")),a.a.createElement("div",{style:{marginBottom:"10px"}},a.a.createElement("button",{type:"button",disabled:"right"!==e.type,onClick:n(e.action)},"Turn right")))}}]),e}(a.a.PureComponent);function U(){var t=Object(h.a)(["\n  display: flex;\n"]);return U=function(){return t},t}var W=b.b.div(U()),A={top:{top:"forward",bottom:"around",left:"right",right:"left"},bottom:{top:"around",bottom:"forward",left:"left",right:"right"},left:{top:"left",bottom:"right",left:"forward",right:"around"},right:{top:"right",bottom:"left",left:"around",right:"forward"}},M=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(p.a)(this,Object(f.a)(e).call(this))).updateMatrix=function(e){var n=t.getStateByMatrix(e),r=n.user,a=n.way,i=n.matrix;t.snapshotUserSteps=t.getSnapshotUserSteps(r,a),t.setState({user:r,way:a,matrix:i,step:0})},t.getDirectionUserBySymbol=function(t){switch(t){case">":return"right";case"<":return"left";case"^":return"top";case"v":default:return"bottom"}},t.getStateByMatrix=function(e){var n=e[0].length-1,r=e.length-1,a=[],i={},o=[];e.forEach(function(e,c){a[c]=e.map(function(e,a){switch(" "!==e||0!==c&&c!==r||o.push([a,c])," "!==e||0===c||c===r||0!==a&&a!==n||o.push([a,c]),e){case"#":return 1;case" ":return 0;default:return i.x=a,i.y=c,i.direction=t.getDirectionUserBySymbol(e),0}})});var c=g(a,{x:i.x,y:i.y},{x:o[0][0],y:o[0][1]});return{matrix:a,user:i,way:c}},t.getNeedAction=function(t,e,n){var r="";n[t][0]===n[t+1][0]&&n[t][1]-1===n[t+1][1]&&(r="top"),n[t][0]===n[t+1][0]&&n[t][1]+1===n[t+1][1]&&(r="bottom"),n[t][0]-1===n[t+1][0]&&n[t][1]===n[t+1][1]&&(r="left"),n[t][0]+1===n[t+1][0]&&n[t][1]===n[t+1][1]&&(r="right");var a=A[r][e.direction];return{type:a,action:"forward"!==a?{user:Object(u.a)({},e,{direction:r}),currentStep:t}:{user:Object(u.a)({},e,{x:n[t+1][0],y:n[t+1][1]}),currentStep:t+1}}},t.getNumberRepeatingForwardAction=function(e,n,r){return e<n.length-1&&"forward"===n[e+1].type?t.getNumberRepeatingForwardAction(e+1,n,r+1):Object(u.a)({},n[e],{numberRepeatingSteps:r})},t.getSnapshotUserSteps=function(e,n){for(var r=[],a=0,i=Object(u.a)({},e),o=Object(c.a)(n);a<o.length-1;){var s=t.getNeedAction(a,i,o);a=s.action.currentStep,i=s.action.user,r.push(s)}for(var l=[],p=0;p<r.length;)if("forward"!==r[p].type)l.push(r[p]),p+=1;else{var f=t.getNumberRepeatingForwardAction(p,r,1);l.push(f),p+=f.numberRepeatingSteps}return l},t.checkCellByUser=function(e,n){return e===t.state.user.x&&n===t.state.user.y},t.checkCellByWay=function(e,n){return t.state.way.reduce(function(t,r){return r[0]===e&&r[1]===n&&(t=!0),t},!1)},t.renderMatrix=function(e){return e.map(function(e,n){return a.a.createElement(j,{key:"y-".concat(n)},e.map(function(e,r){return t.checkCellByUser(r,n)?a.a.createElement(k,{key:"x-".concat(r),isWall:Boolean(e),isWay:t.checkCellByWay(r,n),userDirection:t.state.user.direction,isUser:!0}):a.a.createElement(k,{key:"x-".concat(r),isWall:Boolean(e),isWay:t.checkCellByWay(r,n)})}))})},t.handleClickAction=function(e){return function(){t.setState(function(t){return Object(u.a)({},e,{step:t.step+1})})}},t.state={user:null,way:null,matrix:null,step:0},t.snapshotUserSteps=[],t}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.state,e=t.matrix,n=t.step,r=this.snapshotUserSteps[n];return a.a.createElement("div",null,a.a.createElement(S,{updateMatrix:this.updateMatrix}),e&&a.a.createElement(W,null,a.a.createElement("div",null,e.length>0&&this.renderMatrix(e)),r?a.a.createElement(B,{snapshotUserStep:r,handleClickAction:this.handleClickAction}):a.a.createElement("p",{style:{marginLeft:"20px"}},"Congratulations")))}}]),e}(a.a.Component),D=document.getElementById("root");o.a.render(a.a.createElement(M,null),D)}},[[28,1,2]]]);
//# sourceMappingURL=main.4bcc00a3.chunk.js.map